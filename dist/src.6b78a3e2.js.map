{"version":3,"sources":["src/index.js"],"names":["window","jQuery","$","fn","jselect_search","options","settings","extend","placeholder","fillable","searchable","on_top_edge","on_bottom_edge","on_change","on_active","on_clear_reflect","disable_text_update","each","attr","addClass","join","append","index","find","on","innerHeight","offsetHeight","scrollTop","scrollHeight","_default_text","func","wait","immediate","timeout","text","val","closest","e","preventDefault","hasClass","trigger","removeClass","show","v","toLowerCase","hide","filter","n","indexOf","fadeIn","context","args","arguments","callNow","clearTimeout","setTimeout","apply","keyCode","which","document","dp","is","target","has","length","_this","prop","html","stopPropagation","sims","split","i"],"mappings":"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","file":"src.6b78a3e2.js","sourceRoot":"..","sourcesContent":["import './style.scss';\r\n\r\nif ('undefined' != typeof window.jQuery ) {\r\n\r\n  $.fn.jselect_search = function ( options ) {\r\n    let settings = $.extend({\r\n          placeholder : 'Search here',\r\n          fillable : false, // allow if custom item will be added when hit enter on the search input\r\n          searchable : true, // determine if allow search on items or return the searchable function with return the value of the search input\r\n          on_top_edge : false, // on reach top edge of dropdown wrapper trigger function\r\n          on_bottom_edge : false, // on reach bottom edge of dropdown wrapper trigger function\r\n          on_change : false, // on change function to be triggered with return the select element of the initialized element\r\n          on_active : false, // when dropdown has been activated with return the total instance of the initialized element\r\n          on_clear_reflect : [], // clear other simblings, simblings must be id\r\n          disable_text_update : false // dont update the select text upon successfully click on items, default false\r\n          }, options );\r\n\r\n    let debounce = function(func, wait, immediate) {\r\n\r\n      var timeout;\r\n\r\n      return function() {\r\n          var context = this, args = arguments;\r\n          var later = function() {\r\n              timeout = null;\r\n              if (!immediate) func.apply(context, args);\r\n          };\r\n\r\n          var callNow = immediate && !timeout;\r\n          clearTimeout(timeout);\r\n          timeout = setTimeout(later, wait);\r\n          if (callNow) func.apply(context, args);\r\n      };\r\n    }\r\n\r\n    return $(this).each(function(){\r\n      let placeholder = ( typeof $(this).attr('data-placeholder')  != 'undefined' ?  $(this).attr('data-placeholder') : settings.placeholder );\r\n      $(this).addClass('select-search')\r\n        .attr('data-clear-simblings',settings.on_clear_reflect.join(','))\r\n        .append( `<a href=\"#\" class=\"trigger\"></a>\r\n          <div class=\"sub-wrapper\"><div class=\"select-search-sub\">\r\n            ${( settings.searchable ? '<input class=\"select-search-input\" type=\"text\" placeholder=\"'+placeholder+'\" name=\"select_search_'+$(this).index()+'\">' : '')}\r\n            <ul></ul>\r\n          <div></div>`\r\n      ).find('.select-search-sub ul').on('scroll',function(){\r\n          //visible height + pixel scrolled = total height \r\n          if( $(this).innerHeight() > 300 ){\r\n            if( this.offsetHeight + this.scrollTop == this.scrollHeight){\r\n              if( settings.on_bottom_edge && typeof settings.on_bottom_edge == 'function' ){\r\n                settings.on_bottom_edge(this);\r\n              }\r\n            }\r\n\r\n            if( this.scrollTop == 0 ){\r\n              if( settings.on_top_edge && typeof settings.on_top_edge == 'function' ){\r\n                settings.on_top_edge(this);\r\n              } \r\n            }\r\n          }\r\n       });\r\n\r\n      if( settings.disable_text_update ){\r\n        $(this).addClass('disable-text-update')\r\n      }\r\n\r\n      let _default_text = $(this).find('select option:selected').text();\r\n\r\n      $(this).find('.trigger').text(_default_text);\r\n\r\n      $(this).find('select option').each(function(){\r\n        if( $(this).val() != '' ){\r\n          $(this).closest('.select-search').find('.select-search-sub ul').append('<li><a href=\"#\" data-value=\"'+$(this).val()+'\">'+$(this).text()+'</a></li>');\r\n        }\r\n      });\r\n      $(this).find('.trigger').on('click',function(e){\r\n        e.preventDefault();\r\n        if( $(this).closest('.select-search').hasClass('active') ){\r\n          $('.select-search.active select').trigger('focusout');\r\n          $('.select-search.active').removeClass('active');\r\n        }else{\r\n          $('.select-search.active').removeClass('active'); // remove all active class first\r\n          $(this).closest('.select-search').find('.select-search-sub li').show();\r\n          $(this).closest('.select-search').addClass('active').find('.select-search-sub input').val('');\r\n\r\n          if( settings.on_active && typeof settings.on_active == 'function' ){\r\n            settings.on_active($(this).closest('.select-search'));\r\n          }\r\n          \r\n        }\r\n      });\r\n\r\n      $(this).find('select').on('change',function(){\r\n        if( settings.on_change && typeof settings.on_change == 'function' ){\r\n          settings.on_change($(this));\r\n        }\r\n      });\r\n\r\n      $(this).find('.select-search-sub input').on('input', debounce( function(){\r\n        if( settings.searchable && typeof settings.searchable != 'function' ){\r\n          let v = $(this).val().toLowerCase();\r\n          $(this).closest('.select-search').find('.select-search-sub ul li').hide().filter(function() {\r\n                let n = $(this).find(\"a\").text().toLowerCase();\r\n                return n.indexOf(v) > -1;\r\n          }).fadeIn(200);\r\n        }\r\n\r\n        if( settings.searchable && typeof settings.searchable == 'function' ){\r\n          settings.searchable($(this).val());\r\n        }\r\n      },500));\r\n\r\n      $(this).find('.select-search-sub input').on('keydown',function(e){\r\n        if ( (e.keyCode == 32 || e.which == 13 || e.keyCode == 13 ) && settings.fillable ) {\r\n          $(this).closest('.select-search').find('.trigger').text($(this).val());\r\n          $(this).closest('.select-search').find('.select-search-sub ul').append('<li><a href=\"#\" data-value=\"'+$(this).val()+'\">'+$(this).val()+'</a></li>');\r\n          $(this).closest('.select-search').find('select').append('<option value=\"'+$(this).val()+'\">'+$(this).val()+'</option>').val($(this).val());\r\n          $('.select-search.active').removeClass('active')\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  //event click j menu listener\r\n  $(document).on(\"mousedown touchstart\", function(e) {\r\n      var dp = $('.select-search-sub:visible,.clear-btn,.trigger');\r\n      if (!dp.is(e.target) && dp.has(e.target).length === 0) {\r\n        $('.select-search.active select').trigger('focusout');\r\n        $('.select-search.active').removeClass('active');\r\n\r\n      }\r\n  });\r\n\r\n  $(document).on('click','.select-search-sub ul li a',function(e){\r\n    e.preventDefault();\r\n    let _this = $(this);\r\n    $(this).closest('.select-search').find('select option[value=\"'+$(this).attr('data-value')+'\"]').prop('selected',true).closest('select').trigger('change');\r\n    if( $(this).closest('.select-search').hasClass('disable-text-update') ){\r\n      return;\r\n    }\r\n    $('.select-search.active').removeClass('active')\r\n    .find('.trigger').html('<span class=\"clear-btn\"></span> '+$(this).text()).find('span.clear-btn').on('click',function(e){\r\n      e.stopPropagation();\r\n      $(this).closest('.select-search').find('select').val('');\r\n      $(this).closest('.trigger').html( $(this).closest('.select-search').find('select option[value=\"\"]').text());\r\n\r\n      // clear simblings\r\n      let sims = _this.closest('.select-search').attr('data-clear-simblings');\r\n\r\n      $.each( sims.split(','),function(i,e){\r\n        $(e).find('.trigger').html( $(e).find('select option[value=\"\"]').text());\r\n        $(e).find('select').val('');\r\n      });\r\n      \r\n    });\r\n  });\r\n}"]}