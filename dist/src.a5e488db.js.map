{"version":3,"sources":["src/index.js"],"names":["window","jQuery","$","fn","jselect_search","options","settings","extend","placeholder","fillable","searchable","on_top_edge","on_bottom_edge","on_change","each","attr","addClass","append","index","find","on","offsetHeight","scrollTop","scrollHeight","_default_text","func","wait","immediate","timeout","text","val","closest","e","preventDefault","hasClass","removeClass","show","v","toLowerCase","hide","filter","n","indexOf","fadeIn","context","args","arguments","callNow","clearTimeout","setTimeout","apply","keyCode","which","document","dp","is","target","has","length","prop","trigger","html","stopPropagation"],"mappings":"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","file":"src.a5e488db.js","sourceRoot":"..","sourcesContent":["import './style.scss';\r\n\r\nif ('undefined' != typeof window.jQuery ) {\r\n\r\n    $.fn.jselect_search = function ( options ) {\r\n      let settings = $.extend({\r\n            placeholder : 'Search here',\r\n            fillable : false,\r\n            searchable : true,\r\n            on_top_edge : false,\r\n            on_bottom_edge : false,\r\n            on_change : false,\r\n            }, options );\r\n\r\n      let debounce = function(func, wait, immediate) {\r\n\r\n        var timeout;\r\n\r\n        return function() {\r\n            var context = this, args = arguments;\r\n            var later = function() {\r\n                timeout = null;\r\n                if (!immediate) func.apply(context, args);\r\n            };\r\n\r\n            var callNow = immediate && !timeout;\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(later, wait);\r\n            if (callNow) func.apply(context, args);\r\n        };\r\n      }\r\n\r\n      return $(this).each(function(){\r\n        let placeholder = ( typeof $(this).attr('data-placeholder')  != 'undefined' ?  $(this).attr('data-placeholder') : settings.placeholder );\r\n        $(this).addClass('select-search')\r\n          .append( `<a href=\"#\" class=\"trigger\"></a>\r\n            <div class=\"sub-wrapper\"><div class=\"select-search-sub\">\r\n              ${( settings.searchable ? '<input class=\"select-search-input\" type=\"text\" placeholder=\"'+placeholder+'\" name=\"select_search_'+$(this).index()+'\">' : '')}\r\n              <ul></ul>\r\n            <div></div>`).find('.select-search-sub ul').on('scroll',function(){\r\n              //visible height + pixel scrolled = total height \r\n              if( this.offsetHeight + this.scrollTop == this.scrollHeight){\r\n                if( settings.on_bottom_edge && typeof settings.on_bottom_edge == 'function' ){\r\n                  settings.on_bottom_edge(this);\r\n                }\r\n              }\r\n\r\n              if( this.scrollTop == 0 ){\r\n                if( settings.on_top_edge && typeof settings.on_top_edge == 'function' ){\r\n                  settings.on_top_edge(this);\r\n                } \r\n              }\r\n            });\r\n\r\n        let _default_text = $(this).find('select option:selected').text();\r\n\r\n        $(this).find('.trigger').text(_default_text);\r\n\r\n        $(this).find('select option').each(function(){\r\n          if( $(this).val() != '' ){\r\n            $(this).closest('.select-search').find('.select-search-sub ul').append('<li><a href=\"#\" data-value=\"'+$(this).val()+'\">'+$(this).text()+'</a></li>');\r\n          }\r\n        });\r\n        $(this).find('.trigger').on('click',function(e){\r\n          e.preventDefault();\r\n          if( $(this).closest('.select-search').hasClass('active') ){\r\n            $(this).closest('.select-search').removeClass('active');\r\n          }else{\r\n            $(this).closest('.select-search').find('.select-search-sub li').show();\r\n            $(this).closest('.select-search').addClass('active').find('.select-search-sub input').val('');\r\n            \r\n          }\r\n        });\r\n\r\n        $(this).find('select').on('change',function(){\r\n          if( settings.on_change && typeof settings.on_change == 'function' ){\r\n            settings.on_change($(this));\r\n          }\r\n        });\r\n\r\n        $(this).find('.select-search-sub input').on('input', debounce( function(){\r\n          if( settings.searchable && typeof settings.searchable != 'function' ){\r\n            let v = $(this).val().toLowerCase();\r\n            $(this).closest('.select-search').find('.select-search-sub ul li').hide().filter(function() {\r\n                  let n = $(this).find(\"a\").text().toLowerCase();\r\n                  return n.indexOf(v) > -1;\r\n            }).fadeIn(200);\r\n          }\r\n\r\n          if( settings.searchable && typeof settings.searchable == 'function' ){\r\n            settings.searchable($(this).val());\r\n          }\r\n        },500));\r\n\r\n        $(this).find('.select-search-sub input').on('keydown',function(e){\r\n          if ( (e.keyCode == 32 || e.which == 13 || e.keyCode == 13 ) && settings.fillable ) {\r\n            $(this).closest('.select-search').find('.trigger').text($(this).val());\r\n            $(this).closest('.select-search').find('.select-search-sub ul').append('<li><a href=\"#\" data-value=\"'+$(this).val()+'\">'+$(this).val()+'</a></li>');\r\n            $(this).closest('.select-search').find('select').append('<option value=\"'+$(this).val()+'\">'+$(this).val()+'</option>').val($(this).val());\r\n            $('.select-search.active').removeClass('active')\r\n          }\r\n        });\r\n      });\r\n    };\r\n\r\n    //event click j menu listener\r\n    $(document).on(\"mousedown touchstart\", function(e) {\r\n        var dp = $('.select-search-sub:visible,.clear-btn,.trigger');\r\n        if (!dp.is(e.target) && dp.has(e.target).length === 0) {\r\n          $('.select-search.active').removeClass('active')\r\n        }\r\n    });\r\n\r\n\r\n    $(document).on('click','.select-search-sub ul li a',function(e){\r\n      e.preventDefault();\r\n      $(this).closest('.select-search').find('select option[value=\"'+$(this).attr('data-value')+'\"]').prop('selected',true).closest('select').trigger('change');\r\n      $('.select-search.active').removeClass('active')\r\n      .find('.trigger').html('<span class=\"clear-btn\"></span> '+$(this).text()).find('span.clear-btn').on('click',function(e){\r\n        e.stopPropagation();\r\n        $(this).closest('.select-search').find('select').val('');\r\n        $(this).closest('.trigger').html( $(this).closest('.select-search').find('select option[value=\"\"]').text());\r\n      });\r\n    });\r\n}"]}