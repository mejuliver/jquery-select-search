{"version":3,"sources":["src/index.js"],"names":["window","jQuery","$","fn","jselect_search","options","settings","extend","placeholder","fillable","searchable","on_top_edge","on_bottom_edge","on_change","on_active","on_clear_reflect","each","attr","find","length","addClass","removeClass","join","append","index","on","innerHeight","offsetHeight","scrollTop","scrollHeight","_default_text","func","wait","immediate","timeout","text","val","closest","e","preventDefault","hasClass","trigger","show","v","toLowerCase","hide","filter","n","indexOf","fadeIn","context","args","arguments","callNow","clearTimeout","setTimeout","apply","keyCode","which","document","dp","is","target","has","_this","prop","html","stopPropagation","sims","split","i"],"mappings":"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","file":"src.f833d49f.js","sourceRoot":"..","sourcesContent":["import './style.scss';\n\nif ('undefined' != typeof window.jQuery ) {\n\n  $.fn.jselect_search = function ( options ) {\n    let settings = $.extend({\n          placeholder : 'Search here',\n          fillable : false, // allow if custom item will be added when hit enter on the search input\n          searchable : true, // determine if allow search on items or return the searchable function with return the value of the search input\n          on_top_edge : false, // on reach top edge of dropdown wrapper trigger function\n          on_bottom_edge : false, // on reach bottom edge of dropdown wrapper trigger function\n          on_change : false, // on change function to be triggered with return the select element of the initialized element\n          on_active : false, // when dropdown has been activated with return the total instance of the initialized element\n          on_clear_reflect : [], // clear other simblings, simblings must be id\n          }, options );\n\n    let debounce = function(func, wait, immediate) {\n\n      var timeout;\n\n      return function() {\n          var context = this, args = arguments;\n          var later = function() {\n              timeout = null;\n              if (!immediate) func.apply(context, args);\n          };\n\n          var callNow = immediate && !timeout;\n          clearTimeout(timeout);\n          timeout = setTimeout(later, wait);\n          if (callNow) func.apply(context, args);\n      };\n    }\n\n    return $(this).each(function(){\n      let placeholder = ( typeof $(this).attr('data-placeholder')  != 'undefined' ?  $(this).attr('data-placeholder') : settings.placeholder );\n\n      // add disabled class if select is disabled\n      if( $(this).find('select:disabled').length > 0 ){\n        $(this).addClass('disabled');\n      }else{\n        $(this).removeClass('disabled');\n      }\n\n      $(this).addClass('select-search')\n        .attr('data-clear-simblings',settings.on_clear_reflect.join(','))\n        .append( `<a href=\"#\" class=\"trigger\"></a>\n          <div class=\"sub-wrapper\"><div class=\"select-search-sub\">\n            ${( settings.searchable ? '<input class=\"select-search-input\" type=\"text\" placeholder=\"'+placeholder+'\" name=\"select_search_'+$(this).index()+'\">' : '')}\n            <ul></ul>\n          <div></div>`).find('.select-search-sub ul').on('scroll',function(){\n            //visible height + pixel scrolled = total height \n            if( $(this).innerHeight() > 300 ){\n              if( this.offsetHeight + this.scrollTop == this.scrollHeight){\n                if( settings.on_bottom_edge && typeof settings.on_bottom_edge == 'function' ){\n                  settings.on_bottom_edge(this);\n                }\n              }\n\n              if( this.scrollTop == 0 ){\n                if( settings.on_top_edge && typeof settings.on_top_edge == 'function' ){\n                  settings.on_top_edge(this);\n                } \n              }\n            }\n          });\n\n      let _default_text = $(this).find('select option:selected').text();\n\n      $(this).find('.trigger').text(_default_text);\n\n      $(this).find('select option').each(function(){\n        if( $(this).val() != '' ){\n          $(this).closest('.select-search').find('.select-search-sub ul').append('<li><a href=\"#\" data-value=\"'+$(this).val()+'\">'+$(this).text()+'</a></li>');\n        }\n      });\n      $(this).find('.trigger').on('click',function(e){\n        e.preventDefault();\n        if( $(this).closest('.select-search').hasClass('active') ){\n          $('.select-search.active select').trigger('focusout');\n          $('.select-search.active').removeClass('active');\n        }else{\n          $('.select-search.active').removeClass('active'); // remove all active class first\n          $(this).closest('.select-search').find('.select-search-sub li').show();\n          $(this).closest('.select-search').addClass('active').find('.select-search-sub input').val('');\n\n          if( settings.on_active && typeof settings.on_active == 'function' ){\n            settings.on_active($(this).closest('.select-search'));\n          }\n          \n        }\n      });\n\n      $(this).find('select').on('change',function(){\n        if( settings.on_change && typeof settings.on_change == 'function' ){\n          settings.on_change($(this));\n        }\n      });\n\n      $(this).find('.select-search-sub input').on('input', debounce( function(){\n        if( settings.searchable && typeof settings.searchable != 'function' ){\n          let v = $(this).val().toLowerCase();\n          $(this).closest('.select-search').find('.select-search-sub ul li').hide().filter(function() {\n                let n = $(this).find(\"a\").text().toLowerCase();\n                return n.indexOf(v) > -1;\n          }).fadeIn(200);\n        }\n\n        if( settings.searchable && typeof settings.searchable == 'function' ){\n          settings.searchable($(this).val());\n        }\n      },500));\n\n      $(this).find('.select-search-sub input').on('keydown',function(e){\n        if ( (e.keyCode == 32 || e.which == 13 || e.keyCode == 13 ) && settings.fillable ) {\n          $(this).closest('.select-search').find('.trigger').text($(this).val());\n          $(this).closest('.select-search').find('.select-search-sub ul').append('<li><a href=\"#\" data-value=\"'+$(this).val()+'\">'+$(this).val()+'</a></li>');\n          $(this).closest('.select-search').find('select').append('<option value=\"'+$(this).val()+'\">'+$(this).val()+'</option>').val($(this).val());\n          $('.select-search.active').removeClass('active')\n        }\n      });\n    });\n  };\n\n  //event click j menu listener\n  $(document).on(\"mousedown touchstart\", function(e) {\n      var dp = $('.select-search-sub:visible,.clear-btn,.trigger');\n      if (!dp.is(e.target) && dp.has(e.target).length === 0) {\n        $('.select-search.active select').trigger('focusout');\n        $('.select-search.active').removeClass('active');\n\n      }\n  });\n\n  $(document).on('click','.select-search-sub ul li a',function(e){\n    e.preventDefault();\n    let _this = $(this);\n    $(this).closest('.select-search').find('select option[value=\"'+$(this).attr('data-value')+'\"]').prop('selected',true).closest('select').trigger('change');\n    $('.select-search.active').removeClass('active')\n    .find('.trigger').html('<span class=\"clear-btn\"></span> '+$(this).text()).find('span.clear-btn').on('click',function(e){\n      e.stopPropagation();\n      $(this).closest('.select-search').find('select').val('');\n      $(this).closest('.trigger').html( $(this).closest('.select-search').find('select option[value=\"\"]').text());\n      $('.select-search.active').removeClass('active');\n      // clear simblings\n      let sims = _this.closest('.select-search').attr('data-clear-simblings');\n\n      $.each( sims.split(','),function(i,e){\n        $(e).find('.trigger').html( $(e).find('select option[value=\"\"]').text());\n        $(e).find('select').val('');\n      });\n      \n    });\n  });\n}"]}